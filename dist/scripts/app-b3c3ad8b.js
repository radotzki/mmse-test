!function(){"use strict";angular.module("app.storage",[])}(),function(){"use strict";function o(o){function e(){var e=new Firebase("https://mmse-test.firebaseio.com/"),t=o(e);return t.$asArray().$loaded()}function t(e){var t=new Firebase("https://mmse-test.firebaseio.com/"),n=o(t);n.$push(e)}function n(o){var e={id:o,startTime:new Date};localStorage.setItem(o,JSON.stringify(e))}function i(o){return JSON.parse(localStorage.getItem(o))}function a(o,e,t){var n=JSON.parse(localStorage.getItem(o));n[t]=e,localStorage.setItem(o,JSON.stringify(n))}function s(o){localStorage.setItem("nouns",JSON.stringify(o))}function l(){var o=JSON.parse(localStorage.getItem("nouns"));return o}function r(o){localStorage.setItem("decreasedNumber",o)}function p(){var o=localStorage.getItem("decreasedNumber");return o}var u={getAllUsers:e,saveUserToDB:t,saveNewUser:n,getUser:i,saveStep:a,saveNouns:s,getNouns:l,saveDecreased:r,getDecreased:p};return u}angular.module("app.storage").factory("appStorage",o),o.$inject=["$firebase"]}(),function(){"use strict";angular.module("app.step6",[])}(),function(){"use strict";function o(o,e,t,n){function i(){a(),c.randomMin=Math.floor(55*Math.random()),c.randomHour=Math.floor(10*Math.random())+1,s()}function a(){u=0,p=o(function(){u++},1e3)}function s(){var o=30*c.randomHour+c.randomMin/2,e="rotate("+o+"deg)",t=6*c.randomMin,n="rotate("+t+"deg)";$("#hour").css({"-moz-transform":e,"-webkit-transform":e}),$("#min").css({"-moz-transform":n,"-webkit-transform":n})}function l(){o.cancel(p),p=void 0;var i={time:u,score:r()};n.saveStep(e.id,i,6),t.go("result",{id:e.id})}function r(){return console.log("time in seconds:",u),console.log("answer:",c.answer.hour,c.answer.minute),console.log("correct-answer:",c.randomHour,c.randomMin),0}var p,u,c=this;c.answer,c.randomMin,c.randomHour,c.next=l,i()}angular.module("app.step6").controller("Step6",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step6").config(["$stateProvider",function(o){o.state("step6",{url:"/step6/:id",templateUrl:"app/step6/index.html",controller:"Step6 as vm"})}])}(),function(){"use strict";angular.module("app.step5",[])}(),function(){"use strict";function o(o,e,t,n){function i(){a(),u.decreasedNumber=n.getDecreased()}function a(){p=0,r=o(function(){p++},1e3)}function s(){o.cancel(r),r=void 0;var i={time:p,score:l()};n.saveDecreased(u.decrease),n.saveStep(e.id,i,5),t.go("step6",{id:e.id})}function l(){return console.log("time in seconds:",p),console.log("answer:",u.answer.hour,u.answer.minute),console.log("correct-answer:","16","25"),console.log(u.decreasedNumber+" - 7 = ",u.decrease),0}var r,p,u=this;u.answer,u.decreasedNumber,u.next=s,i()}angular.module("app.step5").controller("Step5",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step5").config(["$stateProvider",function(o){o.state("step5",{url:"/step5/:id",templateUrl:"app/step5/index.html",controller:"Step5 as vm"})}])}(),function(){"use strict";angular.module("app.step4",[])}(),function(){"use strict";function o(o,e,t,n){function i(){a(),u.decreasedNumber=n.getDecreased(),u.randomNum=Math.floor(10*Math.random()),m.push(c[u.randomNum],c[(u.randomNum+1)%10],c[(u.randomNum+2)%10])}function a(){p=0,r=o(function(){p++},1e3)}function s(){if(u.img1)u.img1=!1,u.img2=!0;else if(u.img2)u.img2=!1,u.img3=!0;else if(u.img3)u.img3=!1,u.finalCalc=!0;else{o.cancel(r),r=void 0;var i={time:p,score:l()};n.saveDecreased(u.decrease),n.saveStep(e.id,i,4),t.go("step3",{id:e.id,state:"ask"})}}function l(){return console.log("time in seconds:",p),console.log("answer:",u.answer.first,u.answer.second,u.answer.third),console.log("correct-answer:",m[0],m[1],m[2]),console.log(u.decreasedNumber+" - 7 = ",u.decrease),0}var r,p,u=this,c=["computer","closet","door","lamp","car","desk","glass","chair","watch","phone"],m=[];u.answer,u.randomNum,u.img1=!0,u.img2=!1,u.img3=!1,u.finalCalc=!1,u.decreasedNumber,u.next=s,i()}angular.module("app.step4").controller("Step4",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step4").config(["$stateProvider",function(o){o.state("step4",{url:"/step4/:id",templateUrl:"app/step4/index.html",controller:"Step4 as vm"})}])}(),function(){"use strict";angular.module("app.step3",[])}(),function(){"use strict";function o(o,e,t,n){function i(){c.state=e.state,"show"!=e.state&&(c.nouns=n.getNouns(),c.decreasedNumber=n.getDecreased(),s())}function a(){var i=Math.floor(10*Math.random());c.nouns=c.nouns.slice(i,i+3),n.saveNouns(c.nouns);var a=o(function(){2===c.index?(o.cancel(a),t.go("step4",{id:e.id})):c.index++},1e4)}function s(){u=0,p=o(function(){u++},1e3)}function l(){o.cancel(p),p=void 0;var i={time:u,score:r()};n.saveDecreased(c.decrease),n.saveStep(e.id,i,3),t.go("step5",{id:e.id})}function r(){return console.log("time in seconds:",u),console.log("answer:",c.answer.noun1,c.answer.noun2,c.answer.noun3),console.log("correct-answer:",c.nouns[0],c.nouns[1],c.nouns[2]),console.log(c.decreasedNumber+" - 7 = ",c.decrease),0}var p,u,c=this;c.answer,c.nouns=["ball","book","banana","bead","ghost","pie","milk","kiss","glove","mailbox","ball","book"],c.index=0,c.state,c.decreasedNumber,c.next=l,c.show=a,i()}angular.module("app.step3").controller("Step3",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step3").config(["$stateProvider",function(o){o.state("step3",{url:"/step3/:id/:state",templateUrl:"app/step3/index.html",controller:"Step3 as vm"})}])}(),function(){"use strict";angular.module("app.step2",[])}(),function(){"use strict";function o(o,e,t,n){function i(){a(),u.decreasedNumber=n.getDecreased()}function a(){p=0,r=o(function(){p++},1e3)}function s(){o.cancel(r),r=void 0;var i={time:p,score:l()};n.saveDecreased(u.decrease),n.saveStep(e.id,i,2),t.go("step3",{id:e.id,state:"show"})}function l(){return console.log("time in seconds:",p),console.log("answer:",u.answer.conutry,u.answer.city,u.answer.floor),console.log("correct-answer:","Israel","Tel Aviv","2"),console.log(u.decreasedNumber+" - 7 = ",u.decrease),0}var r,p,u=this;u.answer,u.decreasedNumber,u.next=s,i()}angular.module("app.step2").controller("Step2",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step2").config(["$stateProvider",function(o){o.state("step2",{url:"/step2/:id",templateUrl:"app/step2/index.html",controller:"Step2 as vm"})}])}(),function(){"use strict";angular.module("app.step1",[])}(),function(){"use strict";function o(o,e,t,n){function i(){a()}function a(){p.timerCount=0,r=o(function(){p.timerCount++},1e3)}function s(){o.cancel(r),r=void 0;var i={time:p.timerCount,score:l()};n.saveDecreased(p.decrease),n.saveStep(e.id,i,1),t.go("step2",{id:e.id})}function l(){var o="";switch((new Date).getMonth()+1){case 12:case 1:case 2:o="winter";break;case 3:case 4:case 5:o="spring";break;case 6:case 7:case 8:o="summer";break;case 9:case 10:case 11:o="fall"}return console.log("time in seconds:",p.timerCount),console.log("answer:",p.date,p.season),console.log("correct-answer:",new Date,o),console.log("100 - 7 = ",p.decrease),0}var r,p=this;p.date,p.season,p.timerCount,p.next=s,i()}angular.module("app.step1").controller("Step1",o),o.$inject=["$interval","$stateParams","$state","appStorage"]}(),function(){"use strict";angular.module("app.step1").config(["$stateProvider",function(o){o.state("step1",{url:"/step1/:id",templateUrl:"app/step1/index.html",controller:"Step1 as vm"})}])}(),function(){"use strict";angular.module("app.result",[])}(),function(){"use strict";function o(o,e){function t(){a.user=e.getUser(o.id),i(),n().then(function(){e.saveUserToDB(a.user)})}function n(){return e.getAllUsers().then(function(e){a.previousTests=_.filter(e,function(e){return e.id&&e.id==o.id})})}function i(){a.user.totalScore=0,a.user.totalTime=0;for(var o=1;7>o;o++)a.user.totalScore+=a.user[o].score,a.user.totalTime+=a.user[o].time}var a=this;a.user,a.previousTests,a.total={score:0,time:0},t()}angular.module("app.result").controller("Result",o),o.$inject=["$stateParams","appStorage"]}(),function(){"use strict";angular.module("app.result").config(["$stateProvider",function(o){o.state("result",{url:"/result/:id",templateUrl:"app/result/index.html",controller:"Result as vm"})}])}(),function(){"use strict";angular.module("app.landing",[])}(),function(){"use strict";function o(o,e){function t(){e.saveNewUser(i.userId),o.go("step1",{id:i.userId})}function n(){e.getAllUsers().then(function(o){i.previousTests=_.filter(o,function(o){return o.id&&o.id==i.userId})})}var i=this;i.userId,i.previousTests,i.start=t,i.history=n}angular.module("app.landing").controller("Landing",o),o.$inject=["$state","appStorage"]}(),function(){"use strict";angular.module("app.landing").config(["$stateProvider",function(o){o.state("landing",{url:"/landing",templateUrl:"app/landing/index.html",controller:"Landing as vm"})}])}(),function(){"use strict";angular.module("app.core",["ngSanitize","ui.router","ui.bootstrap","firebase"])}(),function(){"use strict";function o(o){o.otherwise("/landing")}angular.module("app.core").config(o),o.$inject=["$urlRouterProvider","$locationProvider"]}(),function(){"use strict";angular.module("mmse",["app.core","app.landing","app.result","app.storage","app.step1","app.step2","app.step3","app.step4","app.step5","app.step6"])}(),angular.module("mmse").run(["$templateCache",function(o){o.put("app/landing/index.html",'<div class="jumbotron"><div class="container text-center"><h1>Welcome to mmse test</h1><div class="form-group m-t-m"><input type="number" placeholder="Enter your id" class="form-control" style="width: 30%; margin: auto" ng-model="vm.userId"></div><a class="btn btn-primary" ng-click="vm.start()">START TEST</a> <a class="btn btn-info" ng-click="vm.history()">SHOW HISTORY</a></div><section class="text-center m-t-m" ng-if="vm.previousTests.length"><h4 ng-repeat="test in vm.previousTests | orderBy: \'-startTime\'">Score: {{ test.totalScore }} | Time: {{ test.totalTime }} seconds | from {{ test.startTime | date: \'medium\' }}</h4></section></div>'),o.put("app/result/index.html",'<div class="jumbotron"><div class="container text-center"><h1>Result for {{ vm.user.id }}</h1><h3>Score: {{ vm.user.totalScore }} | Time: {{ vm.user.totalTime }} seconds</h3><section class="m-t-m" ng-if="vm.previousTests.length"><p style="margin-top: 30px;">Previous tests:</p><h4 ng-repeat="test in vm.previousTests | orderBy: \'-startTime\'">Score: {{ test.totalScore }} | Time: {{ test.totalTime }} seconds | from {{ test.startTime | date: \'medium\' }}</h4></section></div></div>'),o.put("app/step1/index.html",'<section class="step"><div class="panel step-panel"><form name="myForm" class="panel-body" novalidate=""><div class="form-group"><label>What is the date now?</label> <input type="date" class="form-control" ng-model="vm.date" required=""></div><div class="form-group"><label>Which season is this?</label><select class="form-control" ng-model="vm.season" required=""><option value="winter">Winter</option><option value="autumn">Autumn</option><option value="summer">Summer</option><option value="spring">Spring</option></select></div><div class="form-group"><label>100 - 7 =</label> <input type="number" class="form-control" ng-model="vm.decrease" required=""></div><a class="btn btn-primary btn-block" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>'),o.put("app/step2/index.html",'<section class="step"><div class="panel step-panel"><form name="myForm" class="panel-body" novalidate=""><div class="form-group"><label>What country are we in?</label> <input type="text" class="form-control" ng-model="vm.answer.conutry" required=""></div><div class="form-group"><label>What city/town are we in?</label> <input type="text" class="form-control" ng-model="vm.answer.city" required=""></div><div class="form-group"><label>What floor are we on?</label> <input type="number" class="form-control" ng-model="vm.answer.floor" required=""></div><div class="form-group"><label>{{vm.decreasedNumber}} - 7 =</label> <input type="number" class="form-control" ng-model="vm.decrease" required=""></div><a class="btn btn-primary btn-block" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>'),o.put("app/step3/index.html",'<section class="step"><div class="panel step-panel" ng-show="vm.state===\'show\'"><div class="panel-body text-center"><h4 ng-show="!start">I am going to name three objects. When I am finished, I want you to repeat them. Remember what they are because I am going to ask you to name them again in a few minutes. Each object will screen for 10 seconds.</h4><a class="btn btn-primary" ng-click="vm.show(); start=true;" ng-show="!start">Ok</a><h1 class="text-center" ng-show="start">{{vm.nouns[vm.index]}}</h1></div></div><div class="panel step-panel" ng-show="vm.state===\'ask\'"><form name="myForm" class="panel-body" novalidate=""><div class="form-group"><label>Noun #1</label> <input type="text" class="form-control" ng-model="vm.answer.noun1" required=""></div><div class="form-group"><label>Noun #2</label> <input type="text" class="form-control" ng-model="vm.answer.noun2" required=""></div><div class="form-group"><label>Noun #3</label> <input type="text" class="form-control" ng-model="vm.answer.noun3" required=""></div><div class="form-group"><label>{{vm.decreasedNumber}} - 7 =</label> <input type="number" class="form-control" ng-model="vm.decrease" required=""></div><a class="btn btn-primary btn-block" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>'),o.put("app/step4/index.html",'<section class="step"><div class="panel step-panel"><form name="myForm" class="panel-body text-center" novalidate=""><section ng-show="vm.img1"><img ng-src="{{\'assets/images/item\' + vm.randomNum + \'.jpg\'}}" class="img-memory"><div class="form-group"><label>What is this called?</label> <input type="text" class="form-control" ng-model="vm.answer.first"></div></section><section ng-show="vm.img2"><img ng-src="{{\'assets/images/item\' + (vm.randomNum + 1) % 10 + \'.jpg\'}}" class="img-memory"><div class="form-group"><label>What is this called?</label> <input type="text" class="form-control" ng-model="vm.answer.second"></div></section><section ng-show="vm.img3"><img ng-src="{{\'assets/images/item\' + (vm.randomNum + 2) % 10 + \'.jpg\'}}" class="img-memory"><div class="form-group"><label>What is this called?</label> <input type="text" class="form-control" ng-model="vm.answer.third"></div></section><section ng-show="vm.finalCalc"><div class="form-group"><label>{{vm.decreasedNumber}} - 7 =</label> <input type="number" class="form-control" ng-model="vm.decrease"></div></section><a class="btn btn-primary btn-block" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>'),o.put("app/step5/index.html",'<section class="step"><div class="panel step-panel"><form name="myForm" class="panel-body text-center form-inline" novalidate=""><h4>Four and twenty five afternoon</h4><p style="margin-top: 30px">What is the time in the text above?</p><div class="form-group"><select class="form-control" ng-model="vm.answer.hour" required=""><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select></div>:<div class="form-group"><select class="form-control" ng-model="vm.answer.minute" required=""><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option></select></div><div class="form-group" style="display: block; margin: 15px auto;"><label>{{vm.decreasedNumber}} - 7 =</label> <input type="number" class="form-control" ng-model="vm.decrease" required=""></div><a class="btn btn-primary btn-block" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>'),o.put("app/step6/index.html",'<section class="step-6"><div class="panel step-panel" style="min-width: 700px"><form name="myForm" class="panel-body text-center form-inline" novalidate=""><ul id="clock"><li id="hour"></li><li id="min"></li></ul><p style="margin-top: 30px">What is the time in the watch above?</p><div class="form-group"><select class="form-control" ng-model="vm.answer.hour" required=""><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div>:<div class="form-group"><select class="form-control" ng-model="vm.answer.minute" required=""><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option></select></div><a class="btn btn-primary btn-block m-t-m" ng-click="vm.next()" ng-disabled="myForm.$invalid">NEXT</a></form></div></section>')}]);